<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.social_crud">
	
	<!--팔로우 -->
	<!--반환 레코드를 config에서 지정한 followVO 빈에 저장 -->
	<resultMap id="followResult" type="followVO">
		<result property="followerID" column="followerID" />	<!-- bean 속성 / db 칼럼명 (대응) -->
		<result property="followedID" column="followedID" />
		<result property="regDate" column="regDate" />
	</resultMap>
	<!-- 팔로우 조회 쿼리. followVO의 속성에 따라 where 절을 추가함. -->
	<select id="searchFollow" resultMap="followResult" parameterType="followVO">
	<![CDATA[
		select * from FOLLOW
	]]>
		<where>
			<if test="followerID != '' and followerID != null">
				followerID = #{followerID}
			</if>
			<if test="followedID != '' and followedID != null">
				and followedID = #{followedID}
			</if>
			<if test="regDate != '' and regDate != null">
				and regDate = #{regDate}
			</if>
		</where>
	</select>
	<!-- 팔로우 추가 쿼리 -->
	<insert id="insertFollow" parameterType="followVO">
	<![CDATA[
		insert into FOLLOW
		values(#{followerID},#{followedID},#{regDate})
	]]>
	</insert>
	<!-- 팔로우 삭제 쿼리 -->
	<delete id="deleteFollow" parameterType="followVO">
	<![CDATA[
		delete from FOLLOW
		where
		followerID = #{followerID} AND followedID = #{followedID}
	]]>
	</delete>
	
	

	
</mapper>

